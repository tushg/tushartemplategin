sequenceDiagram
    participant Client
    participant MessageCatalogService
    participant Cache
    participant FileSystem
    participant Logger
    
    Note over Client,Logger: Cache Hit Performance Flow
    
    Client->>MessageCatalogService: GetMessage(code, lang)
    Note over Client,MessageCatalogService: First request - cache miss
    
    MessageCatalogService->>Cache: Check cache
    Cache-->>MessageCatalogService: Cache miss
    
    MessageCatalogService->>FileSystem: Read JSON file
    FileSystem-->>MessageCatalogService: Return file content (slow)
    
    MessageCatalogService->>MessageCatalogService: Parse JSON
    MessageCatalogService->>Cache: Store in cache
    MessageCatalogService-->>Client: Return Message (slow)
    
    Note over Client,Logger: Subsequent requests - cache hit
    
    Client->>MessageCatalogService: GetMessage(code, lang)
    Note over Client,MessageCatalogService: Second request - cache hit
    
    MessageCatalogService->>Cache: Check cache
    Cache-->>MessageCatalogService: Cache hit (fast)
    
    MessageCatalogService-->>Client: Return Message (fast)
    
    Note over Client,Logger: Batch Loading Performance
    
    Client->>MessageCatalogService: ReloadCatalog()
    Note over Client,MessageCatalogService: Reload all languages at once
    
    MessageCatalogService->>FileSystem: Scan directory
    FileSystem-->>MessageCatalogService: Return file list
    
    par Parallel File Loading
        MessageCatalogService->>FileSystem: Read en.json
        FileSystem-->>MessageCatalogService: Return en content
    and
        MessageCatalogService->>FileSystem: Read fr.json
        FileSystem-->>MessageCatalogService: Return fr content
    and
        MessageCatalogService->>FileSystem: Read es.json
        FileSystem-->>MessageCatalogService: Return es content
    end
    
    MessageCatalogService->>MessageCatalogService: Parse all JSON files
    MessageCatalogService->>Cache: Update entire cache
    MessageCatalogService-->>Client: Return success
    
    Note over Client,Logger: Memory Management
    
    Client->>MessageCatalogService: GetMessage(code, lang)
    Note over Client,MessageCatalogService: Request with memory optimization
    
    MessageCatalogService->>MessageCatalogService: Check cache size
    alt Cache Size Exceeded
        MessageCatalogService->>Cache: Evict old entries
        MessageCatalogService->>Logger: Log cache eviction
    end
    
    MessageCatalogService->>Cache: Store new message
    MessageCatalogService-->>Client: Return Message
    
    Note over Client,Logger: Lazy Loading Performance
    
    Client->>MessageCatalogService: GetMessage(code, "new_lang")
    Note over Client,MessageCatalogService: Request for new language
    
    MessageCatalogService->>Cache: Check cache
    Cache-->>MessageCatalogService: Language not cached
    
    MessageCatalogService->>FileSystem: Read new_lang.json
    FileSystem-->>MessageCatalogService: Return file content
    
    MessageCatalogService->>MessageCatalogService: Parse JSON
    MessageCatalogService->>Cache: Store only this language
    MessageCatalogService-->>Client: Return Message
    
    Note over Client,Logger: Error Recovery Performance
    
    Client->>MessageCatalogService: GetMessage(code, lang)
    Note over Client,MessageCatalogService: Request with error recovery
    
    MessageCatalogService->>FileSystem: Read JSON file
    FileSystem-->>MessageCatalogService: File read error
    
    MessageCatalogService->>Logger: Log error
    MessageCatalogService->>Cache: Check if cached version exists
    alt Cached Version Available
        Cache-->>MessageCatalogService: Return cached message
        MessageCatalogService-->>Client: Return cached Message
    else No Cached Version
        MessageCatalogService-->>Client: Return AppError
    end
